@model BrowseDirectoryTree
@helper RenderTree(IEnumerable<BrowseDirectory> directories, int level = 1)
{
  <div style="margin-left: @(level * 5)px;">
    @foreach (var directory in directories.OrderBy(x => x.Type).ThenBy(x => x.Name))
    {
      if (directory.Type == BrowseDirectoryType.Directory)
      {
      <i class="icon-folder-open"></i> @directory.Name
      }
      else if (directory.Type == BrowseDirectoryType.Repository)
      {
      <i class="icon-code-fork"></i> @directory.Name @:(@Url.RepositoryCloneUrl(directory.Path))
        if (!string.IsNullOrEmpty(directory.Message))
        {
      <br />
      <i class="icon-comment-alt"></i> @directory.Message
        }
      <br />
      }

      if (directory.Directories != null && directory.Directories.Any())
      {
      @RenderTree(directory.Directories, level + 1)
      }
    }
  </div>  
}

@RenderTree(Model.Directories)